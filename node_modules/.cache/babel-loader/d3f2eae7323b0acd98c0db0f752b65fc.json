{"ast":null,"code":"function createRenderStep(runNextFrame) {\n  var toRun = [];\n  var toRunNextFrame = [];\n  var numToRun = 0;\n  var isProcessing = false;\n  var toKeepAlive = new WeakSet();\n  var step = {\n    schedule: function (callback, keepAlive, immediate) {\n      if (keepAlive === void 0) {\n        keepAlive = false;\n      }\n      if (immediate === void 0) {\n        immediate = false;\n      }\n      var addToCurrentFrame = immediate && isProcessing;\n      var buffer = addToCurrentFrame ? toRun : toRunNextFrame;\n      if (keepAlive) toKeepAlive.add(callback);\n      if (buffer.indexOf(callback) === -1) {\n        buffer.push(callback);\n        if (addToCurrentFrame && isProcessing) numToRun = toRun.length;\n      }\n      return callback;\n    },\n    cancel: function (callback) {\n      var index = toRunNextFrame.indexOf(callback);\n      if (index !== -1) toRunNextFrame.splice(index, 1);\n      toKeepAlive.delete(callback);\n    },\n    process: function (frameData) {\n      var _a;\n      isProcessing = true;\n      _a = [toRunNextFrame, toRun], toRun = _a[0], toRunNextFrame = _a[1];\n      toRunNextFrame.length = 0;\n      numToRun = toRun.length;\n      if (numToRun) {\n        for (var i = 0; i < numToRun; i++) {\n          var callback = toRun[i];\n          callback(frameData);\n          if (toKeepAlive.has(callback)) {\n            step.schedule(callback);\n            runNextFrame();\n          }\n        }\n      }\n      isProcessing = false;\n    }\n  };\n  return step;\n}\nexport { createRenderStep };","map":{"version":3,"names":["createRenderStep","runNextFrame","toRun","toRunNextFrame","numToRun","isProcessing","toKeepAlive","WeakSet","step","schedule","callback","keepAlive","immediate","addToCurrentFrame","buffer","add","indexOf","push","length","cancel","index","splice","delete","process","frameData","_a","i","has"],"sources":["E:/Hasan sir project/ChattersTwo/frontend/node_modules/framesync/dist/es/create-render-step.js"],"sourcesContent":["function createRenderStep(runNextFrame) {\r\n    var toRun = [];\r\n    var toRunNextFrame = [];\r\n    var numToRun = 0;\r\n    var isProcessing = false;\r\n    var toKeepAlive = new WeakSet();\r\n    var step = {\r\n        schedule: function (callback, keepAlive, immediate) {\r\n            if (keepAlive === void 0) { keepAlive = false; }\r\n            if (immediate === void 0) { immediate = false; }\r\n            var addToCurrentFrame = immediate && isProcessing;\r\n            var buffer = addToCurrentFrame ? toRun : toRunNextFrame;\r\n            if (keepAlive)\r\n                toKeepAlive.add(callback);\r\n            if (buffer.indexOf(callback) === -1) {\r\n                buffer.push(callback);\r\n                if (addToCurrentFrame && isProcessing)\r\n                    numToRun = toRun.length;\r\n            }\r\n            return callback;\r\n        },\r\n        cancel: function (callback) {\r\n            var index = toRunNextFrame.indexOf(callback);\r\n            if (index !== -1)\r\n                toRunNextFrame.splice(index, 1);\r\n            toKeepAlive.delete(callback);\r\n        },\r\n        process: function (frameData) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [toRunNextFrame, toRun], toRun = _a[0], toRunNextFrame = _a[1];\r\n            toRunNextFrame.length = 0;\r\n            numToRun = toRun.length;\r\n            if (numToRun) {\r\n                for (var i = 0; i < numToRun; i++) {\r\n                    var callback = toRun[i];\r\n                    callback(frameData);\r\n                    if (toKeepAlive.has(callback)) {\r\n                        step.schedule(callback);\r\n                        runNextFrame();\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n    };\r\n    return step;\r\n}\r\n\r\nexport { createRenderStep };\r\n"],"mappings":"AAAA,SAASA,gBAAgBA,CAACC,YAAY,EAAE;EACpC,IAAIC,KAAK,GAAG,EAAE;EACd,IAAIC,cAAc,GAAG,EAAE;EACvB,IAAIC,QAAQ,GAAG,CAAC;EAChB,IAAIC,YAAY,GAAG,KAAK;EACxB,IAAIC,WAAW,GAAG,IAAIC,OAAO,CAAC,CAAC;EAC/B,IAAIC,IAAI,GAAG;IACPC,QAAQ,EAAE,SAAAA,CAAUC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,EAAE;MAChD,IAAID,SAAS,KAAK,KAAK,CAAC,EAAE;QAAEA,SAAS,GAAG,KAAK;MAAE;MAC/C,IAAIC,SAAS,KAAK,KAAK,CAAC,EAAE;QAAEA,SAAS,GAAG,KAAK;MAAE;MAC/C,IAAIC,iBAAiB,GAAGD,SAAS,IAAIP,YAAY;MACjD,IAAIS,MAAM,GAAGD,iBAAiB,GAAGX,KAAK,GAAGC,cAAc;MACvD,IAAIQ,SAAS,EACTL,WAAW,CAACS,GAAG,CAACL,QAAQ,CAAC;MAC7B,IAAII,MAAM,CAACE,OAAO,CAACN,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;QACjCI,MAAM,CAACG,IAAI,CAACP,QAAQ,CAAC;QACrB,IAAIG,iBAAiB,IAAIR,YAAY,EACjCD,QAAQ,GAAGF,KAAK,CAACgB,MAAM;MAC/B;MACA,OAAOR,QAAQ;IACnB,CAAC;IACDS,MAAM,EAAE,SAAAA,CAAUT,QAAQ,EAAE;MACxB,IAAIU,KAAK,GAAGjB,cAAc,CAACa,OAAO,CAACN,QAAQ,CAAC;MAC5C,IAAIU,KAAK,KAAK,CAAC,CAAC,EACZjB,cAAc,CAACkB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;MACnCd,WAAW,CAACgB,MAAM,CAACZ,QAAQ,CAAC;IAChC,CAAC;IACDa,OAAO,EAAE,SAAAA,CAAUC,SAAS,EAAE;MAC1B,IAAIC,EAAE;MACNpB,YAAY,GAAG,IAAI;MACnBoB,EAAE,GAAG,CAACtB,cAAc,EAAED,KAAK,CAAC,EAAEA,KAAK,GAAGuB,EAAE,CAAC,CAAC,CAAC,EAAEtB,cAAc,GAAGsB,EAAE,CAAC,CAAC,CAAC;MACnEtB,cAAc,CAACe,MAAM,GAAG,CAAC;MACzBd,QAAQ,GAAGF,KAAK,CAACgB,MAAM;MACvB,IAAId,QAAQ,EAAE;QACV,KAAK,IAAIsB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtB,QAAQ,EAAEsB,CAAC,EAAE,EAAE;UAC/B,IAAIhB,QAAQ,GAAGR,KAAK,CAACwB,CAAC,CAAC;UACvBhB,QAAQ,CAACc,SAAS,CAAC;UACnB,IAAIlB,WAAW,CAACqB,GAAG,CAACjB,QAAQ,CAAC,EAAE;YAC3BF,IAAI,CAACC,QAAQ,CAACC,QAAQ,CAAC;YACvBT,YAAY,CAAC,CAAC;UAClB;QACJ;MACJ;MACAI,YAAY,GAAG,KAAK;IACxB;EACJ,CAAC;EACD,OAAOG,IAAI;AACf;AAEA,SAASR,gBAAgB"},"metadata":{},"sourceType":"module"}