{"ast":null,"code":"/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__, __TEST__ } from \"./assertion\";\nexport function runIfFn(valueOrFn) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn;\n}\nexport function callAllHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function func(event) {\n    fns.some(fn => {\n      fn == null ? void 0 : fn(event);\n      return event == null ? void 0 : event.defaultPrevented;\n    });\n  };\n}\nexport function callAll() {\n  for (var _len3 = arguments.length, fns = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    fns[_key3] = arguments[_key3];\n  }\n  return function mergedFn(arg) {\n    fns.forEach(fn => {\n      fn == null ? void 0 : fn(arg);\n    });\n  };\n}\nexport var compose = function compose(fn1) {\n  for (var _len4 = arguments.length, fns = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    fns[_key4 - 1] = arguments[_key4];\n  }\n  return fns.reduce((f1, f2) => function () {\n    return f1(f2(...arguments));\n  }, fn1);\n};\nexport function once(fn) {\n  var result;\n  return function func() {\n    if (fn) {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      result = fn.apply(this, args);\n      fn = null;\n    }\n    return result;\n  };\n}\nexport var noop = () => {};\nexport var warn = once(options => () => {\n  var {\n    condition,\n    message\n  } = options;\n  if (condition && __DEV__) {\n    console.warn(message);\n  }\n});\nexport var error = once(options => () => {\n  var {\n    condition,\n    message\n  } = options;\n  if (condition && __DEV__) {\n    console.error(message);\n  }\n});\nvar promiseMicrotask = callback => {\n  Promise.resolve().then(callback);\n};\nexport var scheduleMicrotask = __TEST__ ? fn => fn() : typeof queueMicrotask === \"function\" ? queueMicrotask : promiseMicrotask;\nexport var pipe = function pipe() {\n  for (var _len6 = arguments.length, fns = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    fns[_key6] = arguments[_key6];\n  }\n  return v => fns.reduce((a, b) => b(a), v);\n};\nvar distance1D = (a, b) => Math.abs(a - b);\nvar isPoint = point => \"x\" in point && \"y\" in point;\nexport function distance(a, b) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b);\n  }\n  if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2);\n  }\n  return 0;\n}","map":{"version":3,"names":["isFunction","isNumber","__DEV__","__TEST__","runIfFn","valueOrFn","_len","arguments","length","args","Array","_key","callAllHandlers","_len2","fns","_key2","func","event","some","fn","defaultPrevented","callAll","_len3","_key3","mergedFn","arg","forEach","compose","fn1","_len4","_key4","reduce","f1","f2","once","result","_len5","_key5","apply","noop","warn","options","condition","message","console","error","promiseMicrotask","callback","Promise","resolve","then","scheduleMicrotask","queueMicrotask","pipe","_len6","_key6","v","a","b","distance1D","Math","abs","isPoint","point","distance","xDelta","x","yDelta","y","sqrt"],"sources":["../../src/function.ts"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__, __TEST__ } from \"./assertion\"\nimport { AnyFunction, FunctionArguments } from \"./types\"\n\nexport function runIfFn<T, U>(\n  valueOrFn: T | ((...fnArgs: U[]) => T),\n  ...args: U[]\n): T {\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn\n}\n\nexport function callAllHandlers<T extends (event: any) => void>(\n  ...fns: (T | undefined)[]\n) {\n  return function func(event: FunctionArguments<T>[0]) {\n    fns.some((fn) => {\n      fn?.(event)\n      return event?.defaultPrevented\n    })\n  }\n}\n\nexport function callAll<T extends AnyFunction>(...fns: (T | undefined)[]) {\n  return function mergedFn(arg: FunctionArguments<T>[0]) {\n    fns.forEach((fn) => {\n      fn?.(arg)\n    })\n  }\n}\n\nexport const compose = <T>(\n  fn1: (...args: T[]) => T,\n  ...fns: Array<(...args: T[]) => T>\n) => fns.reduce((f1, f2) => (...args) => f1(f2(...args)), fn1)\n\nexport function once<T extends AnyFunction>(fn?: T | null) {\n  let result: any\n\n  return function func(this: any, ...args: Parameters<T>) {\n    if (fn) {\n      result = fn.apply(this, args)\n      fn = null\n    }\n\n    return result\n  }\n}\n\nexport const noop = () => {}\n\ntype MessageOptions = {\n  condition: boolean\n  message: string\n}\n\nexport const warn = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.warn(message)\n  }\n})\n\nexport const error = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.error(message)\n  }\n})\n\nconst promiseMicrotask = (callback: VoidFunction) => {\n  Promise.resolve().then(callback)\n}\n\nexport const scheduleMicrotask = __TEST__\n  ? (fn: VoidFunction) => fn()\n  : typeof queueMicrotask === \"function\"\n  ? queueMicrotask\n  : promiseMicrotask\n\nexport const pipe = <R>(...fns: Array<(a: R) => R>) => (v: R) =>\n  fns.reduce((a, b) => b(a), v)\n\nconst distance1D = (a: number, b: number) => Math.abs(a - b)\ntype Point = { x: number; y: number }\n\nconst isPoint = (point: any): point is { x: number; y: number } =>\n  \"x\" in point && \"y\" in point\n\nexport function distance<P extends Point | number>(a: P, b: P) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b)\n  }\n  if (isPoint(a) && isPoint(b)) {\n    const xDelta = distance1D(a.x, b.x)\n    const yDelta = distance1D(a.y, b.y)\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2)\n  }\n  return 0\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}