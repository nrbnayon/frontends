{"ast":null,"code":"import { NEW_FOCUS, newFocus } from './solver';\nimport { getAllAffectedNodes } from './utils/all-affected';\nimport { getAllTabbableNodes, getTabbableNodes } from './utils/DOMutils';\nimport { pickFirstFocus } from './utils/firstFocus';\nimport { isDefined, isNotAGuard } from './utils/is';\nimport { allParentAutofocusables, getTopCommonParent } from './utils/parenting';\nvar findAutoFocused = function (autoFocusables) {\n  return function (node) {\n    return node.autofocus || node.dataset && !!node.dataset.autofocus || autoFocusables.indexOf(node) >= 0;\n  };\n};\nvar reorderNodes = function (srcNodes, dstNodes) {\n  var remap = new Map();\n  dstNodes.forEach(function (entity) {\n    return remap.set(entity.node, entity);\n  });\n  return srcNodes.map(function (node) {\n    return remap.get(node);\n  }).filter(isDefined);\n};\nexport var getFocusMerge = function (topNode, lastNode) {\n  var activeElement = document && document.activeElement;\n  var entries = getAllAffectedNodes(topNode).filter(isNotAGuard);\n  var commonParent = getTopCommonParent(activeElement || topNode, topNode, entries);\n  var anyFocusable = getAllTabbableNodes(entries);\n  var innerElements = getTabbableNodes(entries).filter(function (_a) {\n    var node = _a.node;\n    return isNotAGuard(node);\n  });\n  if (!innerElements[0]) {\n    innerElements = anyFocusable;\n    if (!innerElements[0]) {\n      return undefined;\n    }\n  }\n  var outerNodes = getAllTabbableNodes([commonParent]).map(function (_a) {\n    var node = _a.node;\n    return node;\n  });\n  var orderedInnerElements = reorderNodes(outerNodes, innerElements);\n  var innerNodes = orderedInnerElements.map(function (_a) {\n    var node = _a.node;\n    return node;\n  });\n  var newId = newFocus(innerNodes, outerNodes, activeElement, lastNode);\n  if (newId === NEW_FOCUS) {\n    var autoFocusable = anyFocusable.map(function (_a) {\n      var node = _a.node;\n      return node;\n    }).filter(findAutoFocused(allParentAutofocusables(entries)));\n    return {\n      node: autoFocusable && autoFocusable.length ? pickFirstFocus(autoFocusable) : pickFirstFocus(innerNodes)\n    };\n  }\n  if (newId === undefined) {\n    return newId;\n  }\n  return orderedInnerElements[newId];\n};","map":{"version":3,"names":["NEW_FOCUS","newFocus","getAllAffectedNodes","getAllTabbableNodes","getTabbableNodes","pickFirstFocus","isDefined","isNotAGuard","allParentAutofocusables","getTopCommonParent","findAutoFocused","autoFocusables","node","autofocus","dataset","indexOf","reorderNodes","srcNodes","dstNodes","remap","Map","forEach","entity","set","map","get","filter","getFocusMerge","topNode","lastNode","activeElement","document","entries","commonParent","anyFocusable","innerElements","_a","undefined","outerNodes","orderedInnerElements","innerNodes","newId","autoFocusable","length"],"sources":["E:/Hasan sir project/4/frontend/node_modules/focus-lock/dist/es2015/focusMerge.js"],"sourcesContent":["import { NEW_FOCUS, newFocus } from './solver';\r\nimport { getAllAffectedNodes } from './utils/all-affected';\r\nimport { getAllTabbableNodes, getTabbableNodes } from './utils/DOMutils';\r\nimport { pickFirstFocus } from './utils/firstFocus';\r\nimport { isDefined, isNotAGuard } from './utils/is';\r\nimport { allParentAutofocusables, getTopCommonParent } from './utils/parenting';\r\nvar findAutoFocused = function (autoFocusables) { return function (node) {\r\n    return node.autofocus || (node.dataset && !!node.dataset.autofocus) || autoFocusables.indexOf(node) >= 0;\r\n}; };\r\nvar reorderNodes = function (srcNodes, dstNodes) {\r\n    var remap = new Map();\r\n    dstNodes.forEach(function (entity) { return remap.set(entity.node, entity); });\r\n    return srcNodes.map(function (node) { return remap.get(node); }).filter(isDefined);\r\n};\r\nexport var getFocusMerge = function (topNode, lastNode) {\r\n    var activeElement = (document && document.activeElement);\r\n    var entries = getAllAffectedNodes(topNode).filter(isNotAGuard);\r\n    var commonParent = getTopCommonParent(activeElement || topNode, topNode, entries);\r\n    var anyFocusable = getAllTabbableNodes(entries);\r\n    var innerElements = getTabbableNodes(entries).filter(function (_a) {\r\n        var node = _a.node;\r\n        return isNotAGuard(node);\r\n    });\r\n    if (!innerElements[0]) {\r\n        innerElements = anyFocusable;\r\n        if (!innerElements[0]) {\r\n            return undefined;\r\n        }\r\n    }\r\n    var outerNodes = getAllTabbableNodes([commonParent]).map(function (_a) {\r\n        var node = _a.node;\r\n        return node;\r\n    });\r\n    var orderedInnerElements = reorderNodes(outerNodes, innerElements);\r\n    var innerNodes = orderedInnerElements.map(function (_a) {\r\n        var node = _a.node;\r\n        return node;\r\n    });\r\n    var newId = newFocus(innerNodes, outerNodes, activeElement, lastNode);\r\n    if (newId === NEW_FOCUS) {\r\n        var autoFocusable = anyFocusable\r\n            .map(function (_a) {\r\n            var node = _a.node;\r\n            return node;\r\n        })\r\n            .filter(findAutoFocused(allParentAutofocusables(entries)));\r\n        return {\r\n            node: autoFocusable && autoFocusable.length ? pickFirstFocus(autoFocusable) : pickFirstFocus(innerNodes),\r\n        };\r\n    }\r\n    if (newId === undefined) {\r\n        return newId;\r\n    }\r\n    return orderedInnerElements[newId];\r\n};\r\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,UAAU;AAC9C,SAASC,mBAAmB,QAAQ,sBAAsB;AAC1D,SAASC,mBAAmB,EAAEC,gBAAgB,QAAQ,kBAAkB;AACxE,SAASC,cAAc,QAAQ,oBAAoB;AACnD,SAASC,SAAS,EAAEC,WAAW,QAAQ,YAAY;AACnD,SAASC,uBAAuB,EAAEC,kBAAkB,QAAQ,mBAAmB;AAC/E,IAAIC,eAAe,GAAG,SAAAA,CAAUC,cAAc,EAAE;EAAE,OAAO,UAAUC,IAAI,EAAE;IACrE,OAAOA,IAAI,CAACC,SAAS,IAAKD,IAAI,CAACE,OAAO,IAAI,CAAC,CAACF,IAAI,CAACE,OAAO,CAACD,SAAU,IAAIF,cAAc,CAACI,OAAO,CAACH,IAAI,CAAC,IAAI,CAAC;EAC5G,CAAC;AAAE,CAAC;AACJ,IAAII,YAAY,GAAG,SAAAA,CAAUC,QAAQ,EAAEC,QAAQ,EAAE;EAC7C,IAAIC,KAAK,GAAG,IAAIC,GAAG,CAAC,CAAC;EACrBF,QAAQ,CAACG,OAAO,CAAC,UAAUC,MAAM,EAAE;IAAE,OAAOH,KAAK,CAACI,GAAG,CAACD,MAAM,CAACV,IAAI,EAAEU,MAAM,CAAC;EAAE,CAAC,CAAC;EAC9E,OAAOL,QAAQ,CAACO,GAAG,CAAC,UAAUZ,IAAI,EAAE;IAAE,OAAOO,KAAK,CAACM,GAAG,CAACb,IAAI,CAAC;EAAE,CAAC,CAAC,CAACc,MAAM,CAACpB,SAAS,CAAC;AACtF,CAAC;AACD,OAAO,IAAIqB,aAAa,GAAG,SAAAA,CAAUC,OAAO,EAAEC,QAAQ,EAAE;EACpD,IAAIC,aAAa,GAAIC,QAAQ,IAAIA,QAAQ,CAACD,aAAc;EACxD,IAAIE,OAAO,GAAG9B,mBAAmB,CAAC0B,OAAO,CAAC,CAACF,MAAM,CAACnB,WAAW,CAAC;EAC9D,IAAI0B,YAAY,GAAGxB,kBAAkB,CAACqB,aAAa,IAAIF,OAAO,EAAEA,OAAO,EAAEI,OAAO,CAAC;EACjF,IAAIE,YAAY,GAAG/B,mBAAmB,CAAC6B,OAAO,CAAC;EAC/C,IAAIG,aAAa,GAAG/B,gBAAgB,CAAC4B,OAAO,CAAC,CAACN,MAAM,CAAC,UAAUU,EAAE,EAAE;IAC/D,IAAIxB,IAAI,GAAGwB,EAAE,CAACxB,IAAI;IAClB,OAAOL,WAAW,CAACK,IAAI,CAAC;EAC5B,CAAC,CAAC;EACF,IAAI,CAACuB,aAAa,CAAC,CAAC,CAAC,EAAE;IACnBA,aAAa,GAAGD,YAAY;IAC5B,IAAI,CAACC,aAAa,CAAC,CAAC,CAAC,EAAE;MACnB,OAAOE,SAAS;IACpB;EACJ;EACA,IAAIC,UAAU,GAAGnC,mBAAmB,CAAC,CAAC8B,YAAY,CAAC,CAAC,CAACT,GAAG,CAAC,UAAUY,EAAE,EAAE;IACnE,IAAIxB,IAAI,GAAGwB,EAAE,CAACxB,IAAI;IAClB,OAAOA,IAAI;EACf,CAAC,CAAC;EACF,IAAI2B,oBAAoB,GAAGvB,YAAY,CAACsB,UAAU,EAAEH,aAAa,CAAC;EAClE,IAAIK,UAAU,GAAGD,oBAAoB,CAACf,GAAG,CAAC,UAAUY,EAAE,EAAE;IACpD,IAAIxB,IAAI,GAAGwB,EAAE,CAACxB,IAAI;IAClB,OAAOA,IAAI;EACf,CAAC,CAAC;EACF,IAAI6B,KAAK,GAAGxC,QAAQ,CAACuC,UAAU,EAAEF,UAAU,EAAER,aAAa,EAAED,QAAQ,CAAC;EACrE,IAAIY,KAAK,KAAKzC,SAAS,EAAE;IACrB,IAAI0C,aAAa,GAAGR,YAAY,CAC3BV,GAAG,CAAC,UAAUY,EAAE,EAAE;MACnB,IAAIxB,IAAI,GAAGwB,EAAE,CAACxB,IAAI;MAClB,OAAOA,IAAI;IACf,CAAC,CAAC,CACGc,MAAM,CAAChB,eAAe,CAACF,uBAAuB,CAACwB,OAAO,CAAC,CAAC,CAAC;IAC9D,OAAO;MACHpB,IAAI,EAAE8B,aAAa,IAAIA,aAAa,CAACC,MAAM,GAAGtC,cAAc,CAACqC,aAAa,CAAC,GAAGrC,cAAc,CAACmC,UAAU;IAC3G,CAAC;EACL;EACA,IAAIC,KAAK,KAAKJ,SAAS,EAAE;IACrB,OAAOI,KAAK;EAChB;EACA,OAAOF,oBAAoB,CAACE,KAAK,CAAC;AACtC,CAAC"},"metadata":{},"sourceType":"module"}